"Free Text" "/* Homing on positive mechanical limit without an index pulse. Move positive until mechanical limit is reached. Stop when home current threshold is reached for an imposed time. */" 
	Start "Setting parameters And StartMotion" 
	"A 32-bit Long or Fixed" "Type=1 Destination=var_lf Source=0 32BitPart=1" 
	"A 32-bit Long or Fixed" "Type=1 Destination=var_lf Source=HOMETIME 32BitPart=0" 
		Start "Is Homing Number EVEN ?" 
		"A 16-bit Integer" "Type=0 Destination=var_i3 SetVarType=0 Source=homing_nr" 
		"A 16-bit Integer" "Type=0 Destination=var_i3 SetVarType=4 AND=1 OR=0" 
		"Jumps and Function Calls" "Type=0 Label=TSH40_Homing_Mode_40_init_40 Variable=var_i3 Condition=0" 
		End
		Start "Homing Number Is ODD" 
		"A 32-bit Long or Fixed" "Type=0 Destination=CPOS Source=-1000000000 SetVarType=0" 
		"Trapezoidal Profiles" "Profile=0 Type=1 Additive=0 StartPoint=0 Execute=0 WaitForCompletion=0" 
		"Jumps and Function Calls" "Type=0 Label=TSH40_waitCurrent_Negative_40" 
		End
		Start "Homing Number is EVEN" 
		"Jumps and Function Calls" "Type=6 Label=TSH40_Homing_Mode_40_init_40" 
		"A 32-bit Long or Fixed" "Type=0 Destination=CPOS Source=1000000000 SetVarType=0" 
		"Trapezoidal Profiles" "Profile=0 Type=1 Additive=0 StartPoint=0 Execute=0 WaitForCompletion=0" 
		"Jumps and Function Calls" "Type=0 Label=TSH40_waitCurrent_Positive_40" 
		End
	End
"Jumps and Function Calls" "Type=6 Label=TSH40_waitCurrent_Negative_40" 
	Start "Wait for hardstop Negative" 
	"A 16-bit Integer" "Type=0 Destination=var_i3 SetVarType=0 Source=HOMECRT" 
	"Arithmetic Operations" "Type=0 Operand1=var_i3 Operand2=IQREF" 
	"Jumps and Function Calls" "Type=0 Label=TSH40_waitCurrent_Negative_40 Variable=var_i3 Condition=2" 
	"Events" "Stop=0 Wait=1 EvType=4 EvSourceType=1 EvSrcVar=var_lf" 
	"A 16-bit Integer" "Type=0 Destination=var_i3 SetVarType=0 Source=HOMECRT" 
	"Arithmetic Operations" "Type=0 Operand1=var_i3 Operand2=IQREF" 
	"Jumps and Function Calls" "Type=0 Label=TSH40_waitCurrent_Negative_40 Variable=var_i3 Condition=2" 
	End
"Jumps and Function Calls" "Type=0 Label=TSH40_StopMotion_40" 
"Jumps and Function Calls" "Type=6 Label=TSH40_waitCurrent_Positive_40" 
	Start "Wait for hardstop Positive" 
	"A 16-bit Integer" "Type=0 Destination=var_i3 SetVarType=0 Source=HOMECRT" 
	"Arithmetic Operations" "Type=1 Operand1=var_i3 Operand2=IQREF" 
	"Jumps and Function Calls" "Type=0 Label=TSH40_waitCurrent_Positive_40 Variable=var_i3 Condition=2" 
	"Events" "Stop=0 Wait=1 EvType=4 EvSourceType=1 EvSrcVar=var_lf" 
	"A 16-bit Integer" "Type=0 Destination=var_i3 SetVarType=0 Source=HOMECRT" 
	"Arithmetic Operations" "Type=1 Operand1=var_i3 Operand2=IQREF" 
	"Jumps and Function Calls" "Type=0 Label=TSH40_waitCurrent_Positive_40 Variable=var_i3 Condition=2" 
	End
"Jumps and Function Calls" "Type=6 Label=TSH40_StopMotion_40" 
"Arithmetic Operations" "Type=4 Operand1=CACC ShiftType=0 Shift=2" 
	Start "Wait for first index transition(37,38) or stop at current position(39,40)" 
	"A 16-bit Integer" "Type=0 Destination=var_i3 SetVarType=0 Source=homing_nr" 
	"Arithmetic Operations" "Type=1 Operand1=var_i3 Operand2=39" 
	"Jumps and Function Calls" "Type=0 Label=TSH40_homing_39_or_40_40 Variable=var_i3 Condition=5" 
		Start "Homing 37 or 38" 
			Start "Reverse Motion" 
			"A 16-bit Integer" "Type=0 Destination=ASR SetVarType=4 AND=FFFF OR=48" 
			"A 32-bit Long or Fixed" "Type=0 Destination=CPOS Source=-CPOS SetVarType=0" 
			"A 32-bit Long or Fixed" "Type=0 Destination=CSPD Source=HOMESPD SetVarType=0" 
			"Trapezoidal Profiles" "Profile=0 Type=1 StartPoint=1 Execute=0 WaitForCompletion=0" 
			End
			Start "TSH40 Waitindex" 
			"Jumps and Function Calls" "Type=6 Label=TSH40_Waitindex_40" 
			"Events" "Stop=0 Wait=1 EvType=6 EvInput=0 EvInputLevel=1" disabled
			"Free Text" "  // Define event : When the encoder index goes low->high\r\n  DISCAPI;\r\n  !CAP;\r\n  ENCAPI1;\r\n  WAIT!; // Wait until the event occurs" 
			"A 32-bit Long or Fixed" "Type=0 Destination=CPOS Source=CAPPOS SetVarType=0" 
			"A 32-bit Long or Fixed" "Type=0 Destination=CSPD Source=HOMESPD SetVarType=0" 
			"Trapezoidal Profiles" "Profile=0 Type=0 StartPoint=0 Execute=0 WaitForCompletion=1" 
			End
		"Jumps and Function Calls" "Type=0 Label=TSH40_exit_homing_40" 
		End
		Start "Homing 39 or 40" 
		"Jumps and Function Calls" "Type=6 Label=TSH40_homing_39_or_40_40" 
			Start "Hold current position" 
			"A 16-bit Integer" "Type=0 Destination=ASR SetVarType=4 AND=FFFF OR=48" 
			"A 32-bit Long or Fixed" "Type=0 Destination=CSPD Source=HOMESPD SetVarType=0" 
			"Trapezoidal Profiles" "Profile=0 Type=1 StartPoint=1 CPOS=0 Execute=2" 
			End
		"Motor Commands" "Type=3" 
		"Free Text" "   !MC;\r\n  WAIT!; // Wait until the event occurs" 
		End
	End
	Start "Exit homing" 
	"Jumps and Function Calls" "Type=6 Label=TSH40_exit_homing_40" 
	"Motor Commands" "Type=5 SrcVar=HOMEPOS" 
	End
